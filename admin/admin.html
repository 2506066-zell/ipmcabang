<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Admin Kuis</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="page-admin">
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <picture>
          
            </picture>
            <p id="loading-text">Memuat...</p>
       </div>
    </div>


    <main class="admin-container">
        <section class="card">
            <h1 class="card-title">Admin Kuis</h1>
            <p class="card-subtitle">
                Kelola soal & lihat hasil kuis. Halaman ini pakai <span class="code">Login Admin</span> (username + password) yang diset di Apps Script.
            </p>

            <div class="grid-2">
                <div class="field">
                    <label for="admin-username">Username</label>
                    <input id="admin-username" type="text" autocomplete="username" placeholder="Masukkan username admin">
                </div>
                <div class="field">
                    <label for="admin-password">Password</label>
                    <div class="password-wrapper">
                        <input id="admin-password" type="password" autocomplete="current-password" placeholder="Masukkan password admin">
                        <button type="button" id="toggle-admin-password" class="password-toggle" aria-label="Tampilkan/Sembunyikan password"><i class="fas fa-eye"></i></button>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button class="btn btn-primary" id="connect-btn" type="button">
                    <i class="fas fa-right-to-bracket" aria-hidden="true"></i> Login
                </button>
                <button class="btn btn-secondary hidden" id="logout-btn" type="button">
                    <i class="fas fa-right-from-bracket" aria-hidden="true"></i> Keluar
                </button>
                <span class="status" id="status"></span>
            </div>
        </section>

        <section class="card hidden" id="app-card">
            <div class="tabs" role="tablist" aria-label="Admin tabs">
                <button class="tab active" type="button" data-tab="questions" role="tab" aria-selected="true">Soal</button>
                <button class="tab" type="button" data-tab="results" role="tab" aria-selected="false">Hasil</button>
            </div>

            <div id="tab-questions" class="tab-panel">
                <div class="toolbar">
                    <div class="toolbar-left">
                        <input id="search-input" class="search-input" type="search" placeholder="Cari soal...">
                        <select id="quiz-set-filter" class="search-input" style="max-width:140px;margin-left:8px">
                            <option value="all">Semua Kuis</option>
                            <option value="1">Kuis 1</option>
                            <option value="2">Kuis 2</option>
                            <option value="3">Kuis 3</option>
                        </select>
                    </div>
                    <div class="toolbar-right">
                    <select id="status-filter" class="search-input" style="max-width:160px">
                        <option value="all">Semua</option>
                        <option value="active">Aktif</option>
                        <option value="inactive">Nonaktif</option>
                    </select>
                        <button class="btn btn-ghost" type="button" id="refresh-questions-btn">
                            <i class="fas fa-rotate" aria-hidden="true"></i> Refresh
                        </button>
                        <button class="btn btn-primary" type="button" id="new-question-btn">
                            <i class="fas fa-plus" aria-hidden="true"></i> Tambah Soal
                        </button>
                    </div>
                </div>

                <div class="table-wrap">
                    <table id="questions-table">
                        <thead>
                            <tr>
                                <th style="width: 72px;">ID</th>
                                <th style="width: 92px;">Kuis</th>
                                <th>Soal</th>
                                <th style="width: 140px;">Kategori</th>
                                <th style="width: 92px;">Aktif</th>
                                <th style="width: 92px;">Jawaban</th>
                                <th style="width: 200px;">Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="questions-tbody"></tbody>
                    </table>
                    <div class="actions" id="questions-pagination">
                        <button class="btn btn-secondary" id="q-prev">Sebelumnya</button>
                        <span class="status" id="q-page-info"></span>
                        <button class="btn btn-secondary" id="q-next">Berikutnya</button>
                    </div>
                </div>
            </div>

            <div id="tab-results" class="tab-panel hidden">
                <div class="toolbar">
                    <div class="toolbar-left">
                        <span class="small">Menampilkan hasil terbaru.</span>
                    </div>
                    <div class="toolbar-right">
                        <button class="btn btn-ghost" type="button" id="refresh-results-btn">
                            <i class="fas fa-rotate" aria-hidden="true"></i> Refresh
                        </button>
                    </div>
                </div>
                <div class="table-wrap">
                    <table id="results-table">
                        <thead>
                            <tr>
                                <th style="width: 170px;">Waktu</th>
                                <th>Nama</th>
                                <th style="width: 120px;">Skor</th>
                                <th style="width: 120px;">Persen</th>
                            </tr>
                        </thead>
                        <tbody id="results-tbody"></tbody>
                    </table>
                    <div class="actions" id="results-pagination">
                        <button class="btn btn-secondary" id="r-prev">Sebelumnya</button>
                        <span class="status" id="r-page-info"></span>
                        <button class="btn btn-secondary" id="r-next">Berikutnya</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="modal hidden" id="question-modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modal-title">
            <div class="modal-header">
                <h2 id="modal-title">Tambah Soal</h2>
                <button class="modal-close" type="button" id="modal-close-btn" aria-label="Tutup">
                    <i class="fas fa-xmark"></i>
                </button>
            </div>
            <div class="saving-indicator" id="saving-indicator" aria-hidden="true"><div class="bar"></div></div>

            <form id="question-form">
                <input type="hidden" id="q-id">

                <div class="field">
                    <label for="q-question">Pertanyaan</label>
                    <textarea id="q-question" required></textarea>
                </div>

                <div class="field">
                    <label for="q-category">Kategori</label>
                    <input id="q-category" type="text" placeholder="Contoh: Sejarah, Organisasi">
                </div>

                <div class="grid-2">
                    <div class="field">
                        <label for="q-a">Opsi A</label>
                        <input id="q-a" type="text" required>
                    </div>
                    <div class="field">
                        <label for="q-b">Opsi B</label>
                        <input id="q-b" type="text" required>
                    </div>
                    <div class="field">
                        <label for="q-c">Opsi C</label>
                        <input id="q-c" type="text">
                    </div>
                    <div class="field">
                        <label for="q-d">Opsi D</label>
                        <input id="q-d" type="text" required>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="field">
                        <label for="q-correct">Jawaban Benar</label>
                        <select id="q-correct" required>
                            <option value="a">A</option>
                            <option value="b">B</option>
                            <option value="c">C</option>
                            <option value="d">D</option>
                        </select>
                    </div>
                    <div class="field">
                        <label for="q-active">Status</label>
                        <select id="q-active" required>
                            <option value="true">Aktif</option>
                            <option value="false">Nonaktif</option>
                        </select>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="field">
                        <label for="q-quizset">Kuis</label>
                        <select id="q-quizset" required>
                            <option value="1">Kuis 1</option>
                            <option value="2">Kuis 2</option>
                            <option value="3">Kuis 3</option>
                        </select>
                    </div>
                </div>

                <div class="actions">
                    <button class="btn btn-secondary" type="button" id="cancel-btn">
                        <i class="fas fa-xmark" aria-hidden="true"></i> Batal
                    </button>
                    <button class="btn btn-primary" type="submit" id="save-btn">
                        <i class="fas fa-floppy-disk" aria-hidden="true"></i> Simpan
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="../scripts/main.js"></script>
    <script src="./admin.js"></script>
    <script>document.addEventListener('gesturestart', function(e){ e.preventDefault(); });</script>
</body>
</html>
